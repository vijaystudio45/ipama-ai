<!--begin::Navbar-->

<script>
  var defaultThemeMode = "light";
  var themeMode;

  function setTheme() {
    if (document.documentElement) {
      if (document.documentElement.hasAttribute("data-bs-theme-mode")) {
        themeMode = document.documentElement.getAttribute("data-bs-theme-mode");
      } else {
        if (localStorage.getItem("data-bs-theme") !== null) {
          themeMode = localStorage.getItem("data-bs-theme");
        } else {
          themeMode = defaultThemeMode;
        }
      }

      if (themeMode === "system") {
        themeMode = window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      }

      document.documentElement.setAttribute("data-bs-theme", themeMode);
    }
  }

  function toggleTheme() {
    var currentTheme = document.documentElement.getAttribute("data-bs-theme");
    var newTheme = currentTheme === "light" ? "dark" : "light";
    document.documentElement.setAttribute("data-bs-theme", newTheme);
    localStorage.setItem("data-bs-theme", newTheme);
  }

  // Apply the initial theme on page load
  setTheme();
</script>

<div class="app-navbar flex-shrink-0">
  <!--begin::Search-->
  <div class="app-navbar-item align-items-stretch ms-1 ms-md-4">
    {% include 'partials/search/_dropdown.html' %}
  </div>
  <!--end::Search-->
  <!--begin::Activities-->
  <div class="app-navbar-item ms-1 ms-md-4">
    <!--begin::Drawer toggle-->
    <div
      class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px"
      id="kt_activities_toggle"
    >
      {% getIcon 'messages' 'fs-2' %}
    </div>
    <!--end::Drawer toggle-->
  </div>
  <div class="app-navbar-item ms-1 ms-md-4">
    <div
      class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px"
      data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
      data-kt-menu-attach="parent"
      data-kt-menu-placement="bottom-end"
      id="kt_menu_item_wow"
    >
      {% getIcon 'notification-status' 'fs-2' %}
    </div>
    {% include 'partials/menus/_notifications-menu.html' %}
  </div>
  <div class="app-navbar-item ms-1 ms-md-4">
    <div
      class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px position-relative"
      id="kt_drawer_chat_toggle"
    >
      {% getIcon 'message-text-2' 'fs-2' %}
      <span
        class="bullet bullet-dot bg-success h-6px w-6px position-absolute translate-middle top-0 start-50 animation-blink"
      ></span>
    </div>
  </div>
  <div class="app-navbar-item ms-1 ms-md-4">
    <div
      class="btn btn-icon btn-custom btn-icon-muted btn-active-light btn-active-color-primary w-35px h-35px"
      data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
      data-kt-menu-attach="parent"
      data-kt-menu-placement="bottom-end"
    >
      {% getIcon 'element-11' 'fs-2' %}
    </div>
    {% include 'partials/menus/_my-apps-menu.html' %}
  </div>
  <button
    class="darkbuttonon"
    onclick="toggleTheme()"
    style="
      height: 38px;
      margin-top: 17px;
      width: 129px;
      margin: 15px 13px;
      border: none;
    "
  >
    Light/Dark Mode
  </button>

  <div class="app-navbar-item ms-1 ms-md-4" id="kt_header_user_menu_toggle">
    <div
      class="cursor-pointer symbol symbol-35px"
      data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
      data-kt-menu-attach="parent"
      data-kt-menu-placement="bottom-end"
    >
      <img
        src="{% static 'media/logos/default-avatar-icon.jpg' %}"
        class="rounded-3"
        alt="user"
      />
    </div>
    {% include 'partials/menus/_user-account-menu.html' %}
  </div>
  <div class="app-navbar-item d-lg-none ms-2 me-n2" title="Show header menu">
    <div
      class="btn btn-flex btn-icon btn-active-color-primary w-30px h-30px"
      id="kt_app_header_menu_toggle"
    >
      {% getIcon 'element-4' 'fs-1' %}
    </div>
  </div>
</div>
